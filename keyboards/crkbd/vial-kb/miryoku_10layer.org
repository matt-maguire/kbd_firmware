#+title: Custom Miryoku Layout
#+author: Matt Maguire

* Current Layout on Corne v4, based on Miryoku

This layout uses the Miryoku setup with VI movement keys. It has some
tweaks to the base layer to make it easier to type Esperanto and
French. It uses regular CapsLock, as so far I didn't work out how to
get CapsWord working in the Vial firmware.

See the [[https://github.com/manna-harbour/miryoku/tree/master/docs/reference][Miryoku Reference Guide]] for more details about this layout.

This layout consists of 10 layers:
| 0 | Base   |
| 1 | Extra  |
| 2 | Tap    |
| 3 | Button |
| 4 | Nav    |
| 5 | Mouse  |
| 6 | Media  |
| 7 | Num    |
| 8 | Sym    |
| 9 | Fun    |

There are also some tap dance codes defined:

| TD(n), 0≤n≤9 | Double-tap: set default layer to n                   |
| TD(10)       | Double-tap: enter boot loader                        |
| TD(11)       | Tap: Q; Hold: RAlt+6 (esperanta ĉapelo)              |
| TD(12)       | Tap: U; Hold: M0 (LSft+RAlt+9, por esperanta huketo) |
| TD(13)       | Tap: '; Hold: ` (use with RAlt for à, è, etc.)       |

TD(12) uses macro M0 to get the Esperanto "ŭ" on my Linux AltGr dead key IME.

** Base (Layer 0)

|-------+--------+--------+--------+--------+-------+--------+---+--------+-------+--------+--------+--------+--------+-------|
|       | TD(11) |        |        |        |       | ▒▒▒▒▒▒ | ▒ | ▒▒▒▒▒▒ |       |        | TD(12) |        | TD(13) |       |
|       | Q ^    | W      | F      | P      | B     | ▒▒▒▒▒▒ | ▒ | ▒▒▒▒▒▒ | J     | L      | U      | Y      | "' `   |       |
|-------+--------+--------+--------+--------+-------+--------+---+--------+-------+--------+--------+--------+--------+-------|
|       | LGui_T | LAlt_T | LCtl_T | LSft_T |       |        | ▒ |        |       | LSft_T | LCtl_T | LAlt_T | LGui_T |       |
|       | A      | R      | S      | T      | G     |        | ▒ |        | M     | N      | E      | I      | O      |       |
|-------+--------+--------+--------+--------+-------+--------+---+--------+-------+--------+--------+--------+--------+-------|
| OSM   | Btn>   | RAlt_T |        |        |       | OSM    | ▒ | OSM    |       |        |        | RAlt_T | Btn>   | OSM   |
| LSft  | Z      | X      | C      | D      | V     | RSft   | ▒ | LCtl   | K     | H      | <,     | >.     | ?/     | RCtl  |
|-------+--------+--------+--------+--------+-------+--------+---+--------+-------+--------+--------+--------+--------+-------|
| ▒▒▒▒▒ | ▒▒▒▒▒▒ | ▒▒▒▒▒▒ | Med>   | Nav>   | Mse>  | ▒▒▒▒▒▒ | ▒ | ▒▒▒▒▒▒ | Sym>  | Num>   | Fun>   | ▒▒▒▒▒▒ | ▒▒▒▒▒▒ | ▒▒▒▒▒ |
| ▒▒▒▒▒ | ▒▒▒▒▒▒ | ▒▒▒▒▒▒ | (Esc)  | (Spc)  | (Tab) | ▒▒▒▒▒▒ | ▒ | ▒▒▒▒▒▒ | (Ent) | (Bksp) | (Del)  | ▒▒▒▒▒▒ | ▒▒▒▒▒▒ | ▒▒▒▒▒ |
|-------+--------+--------+--------+--------+-------+--------+---+--------+-------+--------+--------+--------+--------+-------|

** Base (Layer 1)

|----+---------+--------+--------+--------+-------+-------+---+-------+-------+--------+--------+--------+--------+----|
|    | Q       | W      | E      | R      | T     | ▒▒▒▒▒ | ▒ | ▒▒▒▒▒ | Y     | U      | I      | O      | P      |    |
|----+---------+--------+--------+--------+-------+-------+---+-------+-------+--------+--------+--------+--------+----|
|    | LGui_T  | LAlt_T | LCtl_T | LSft_T |       | TD(0) | ▒ | TD(0) |       | LSft_T | LCtl_T | LAlt_T | LGui_T |    |
|    | A       | S      | D      | F      | G     |       | ▒ |       | H     | J      | K      | L      | "'     |    |
|----+---------+--------+--------+--------+-------+-------+---+-------+-------+--------+--------+--------+--------+----|
|    | LT3     | RAlt_T |        |        |       | TD(2) | ▒ | TD(2) |       |        |        | RAlt_T | LT3    |    |
|    | Z       | X      | C      | V      | B     |       | ▒ |       | N     | M      | <,     | >.     | ?/     |    |
|----+---------+--------+--------+--------+-------+-------+---+-------+-------+--------+--------+--------+--------+----|
| ▒▒ | ▒▒▒▒▒▒▒ | ▒▒▒▒▒▒ | Media> | Nav>   | Mse>  | ▒▒▒▒▒ | ▒ | ▒▒▒▒▒ | Sym>  | Num>   | Fun>   | ▒▒▒▒▒▒ | ▒▒▒▒▒▒ | ▒▒ |
| ▒▒ | ▒▒▒▒▒▒▒ | ▒▒▒▒▒▒ | (Esc)  | (Spc)  | (Tab) | ▒▒▒▒▒ | ▒ | ▒▒▒▒▒ | (Ent) | (Bksp) | (Del)  | ▒▒▒▒▒▒ | ▒▒▒▒▒▒ | ▒▒ |
|----+---------+--------+--------+--------+-------+-------+---+-------+-------+--------+--------+--------+--------+----|

** Tap (Layer 2)

|---+---+---+-----+-----+-----+-------+---+-------+-----+------+-----+----+----+---|
|   | Q | W | F   | P   | B   | ▒▒▒▒▒ | ▒ | ▒▒▒▒▒ | J   | L    | U   | Y  | "' |   |
|---+---+---+-----+-----+-----+-------+---+-------+-----+------+-----+----+----+---|
|   | A | R | S   | T   | G   | TD(0) | ▒ | TD(0) | M   | N    | E   | I  | O  |   |
|---+---+---+-----+-----+-----+-------+---+-------+-----+------+-----+----+----+---|
|   | Z | X | C   | D   | V   | TD(1) | ▒ | TD(1) | K   | H    | <,  | >. | ?/ |   |
|---+---+---+-----+-----+-----+-------+---+-------+-----+------+-----+----+----+---|
| ▒ | ▒ | ▒ | Esc | Spc | Tab | ▒▒▒▒▒ | ▒ | ▒▒▒▒▒ | Ent | Bksp | Del | ▒  | ▒▒ | ▒ |
|---+---+---+-----+-----+-----+-------+---+-------+-----+------+-----+----+----+---|

** Button (Layer 3)

|-----+------+------+-------+-------+-------+-----+---+-----+-------+-------+------+------+------+-----|
|     | Undo | Cut  | Copy  | Paste | Again | ▒▒▒ | ▒ | ▒▒▒ | Again | Paste | Copy | Cut  | Undo |     |
|-----+------+------+-------+-------+-------+-----+---+-----+-------+-------+------+------+------+-----|
|     | LGui | LAlt | LCtrl | LSft  |       |     | ▒ |     |       | LSft  | LCtl | LAlt | LGui |     |
|-----+------+------+-------+-------+-------+-----+---+-----+-------+-------+------+------+------+-----|
|     | Undo | Cut  | Copy  | Paste | Again |     | ▒ |     | Again | Paste | Copy | Cut  | Undo |     |
|-----+------+------+-------+-------+-------+-----+---+-----+-------+-------+------+------+------+-----|
| ▒▒▒ | ▒▒▒▒ | ▒▒▒▒ | M_3   | M_1   | M_2   | ▒▒▒ | ▒ | ▒▒▒ | M_2   | M_1   | M_3  | ▒▒▒▒ | ▒▒▒▒ | ▒▒▒ |
|-----+------+------+-------+-------+-------+-----+---+-----+-------+-------+------+------+------+-----|

** Nav (Layer 4)


|---+------+------+-------+------+----+---+---+---+-------+-------+------+-------+--------+---|
|   | Boot | Tap  | Extra | Base |    | ▒ | ▒ | ▒ | Again | Paste | Copy | Cut   | Undo   |   |
|---+------+------+-------+------+----+---+---+---+-------+-------+------+-------+--------+---|
|   | LGui | LAlt | LCtl  | LSft |    |   | ▒ |   | Left  | Down  | Up   | Right | CapsLk |   |
|---+------+------+-------+------+----+---+---+---+-------+-------+------+-------+--------+---|
|   |      | RAlt | Opp   | Curr |    |   | ▒ |   | Home  | PgDn  | PgUp | End   | Insert |   |
|---+------+------+-------+------+----+---+---+---+-------+-------+------+-------+--------+---|
| ▒ | ▒▒▒▒ | ▒▒▒▒ | NA    | NA   | NA | ▒ | ▒ | ▒ | Ent   | Bksp  | Del  | ▒▒▒▒  | ▒▒▒▒▒  | ▒ |
|---+------+------+-------+------+----+---+---+---+-------+-------+------+-------+--------+---|

** Mouse (Layer 5)

|---+------+------+-------+------+----+---+---+---+-------+-------+-------+-------+-------+---|
|   | Boot | Tap  | Extra | Base |    | ▒ | ▒ | ▒ | Again | Paste | Copy  | Cut   | Undo  |   |
|---+------+------+-------+------+----+---+---+---+-------+-------+-------+-------+-------+---|
|   | LGui | LAlt | LCtl  | LSft |    |   | ▒ |   | M_Lt  | M_Dn  | M_Up  | M_Rt  |       |   |
|---+------+------+-------+------+----+---+---+---+-------+-------+-------+-------+-------+---|
|   |      | RAlt | Opp   | Curr |    |   | ▒ |   | MW_Lt | MW_Dn | MW_Up | MW_Rt |       |   |
|---+------+------+-------+------+----+---+---+---+-------+-------+-------+-------+-------+---|
| ▒ | ▒▒▒▒ | ▒▒▒▒ | NA    | NA   | NA | ▒ | ▒ | ▒ | M_2   | M_1   | M_3   | ▒▒▒▒▒ | ▒▒▒▒▒ | ▒ |
|---+------+------+-------+------+----+---+---+---+-------+-------+-------+-------+-------+---|

** Media (Layer 6)

|---+------+------+-------+------+----+---+---+---+----------+----------+--------+---------+--------+---|
|   | Boot | Tap  | Extra | Base |    | ▒ | ▒ | ▒ | RGB_Tog  | RGB_M+   | RGB_H+ | RGB_S+  | RGB_V+ |   |
|---+------+------+-------+------+----+---+---+---+----------+----------+--------+---------+--------+---|
|   | LGui | LAlt | LCtl  | LSft |    |   | ▒ |   | Med_Prv  | Vol-     | Vol+   | Med_Nxt | RGB_E+ |   |
|---+------+------+-------+------+----+---+---+---+----------+----------+--------+---------+--------+---|
|   |      | RAlt | Opp   | Curr |    |   | ▒ |   |          |          |        |         |        |   |
|---+------+------+-------+------+----+---+---+---+----------+----------+--------+---------+--------+---|
| ▒ | ▒▒▒▒ | ▒▒▒▒ | NA    | NA   | NA | ▒ | ▒ | ▒ | Med_Stop | Med_Play | Mute   | ▒▒▒▒▒▒▒ | ▒▒▒▒▒▒ | ▒ |
|---+------+------+-------+------+----+---+---+---+----------+----------+--------+---------+--------+---|

*Note:* for RGB adjustments, use <shift> to decrease Mode, Hue, Saturation, Value (brightness) and Effect.

** Num (Layer 7)

|---+---+---+---+---+---+---+---+---+----+------+-------+------+------+---|
|   | [ | 7 | 8 | 9 | ] | ▒ | ▒ | ▒ |    | Base | Extra | Tap  | Boot |   |
|---+---+---+---+---+---+---+---+---+----+------+-------+------+------+---|
|   | ; | 4 | 5 | 6 | = |   | ▒ |   |    | LSft | LCtl  | LAlt | LGui |   |
|---+---+---+---+---+---+---+---+---+----+------+-------+------+------+---|
|   | ` | 1 | 2 | 3 | \ |   | ▒ |   |    | Curr | Opp   | RAlt |      |   |
|---+---+---+---+---+---+---+---+---+----+------+-------+------+------+---|
| ▒ | ▒ | ▒ | . | 0 | - | ▒ | ▒ | ▒ | NA | NA   | NA    | ▒▒▒▒ | ▒▒▒▒ | ▒ |
|---+---+---+---+---+---+---+---+---+----+------+-------+------+------+---|

** Sym (Layer 8)

|---+---+---+---+---+---+---+---+---+----+------+-------+------+------+---|
|   | { | & | * | ( | } | ▒ | ▒ | ▒ |    | Base | Extra | Tap  | Boot |   |
|---+---+---+---+---+---+---+---+---+----+------+-------+------+------+---|
|   | : | $ | % | ^ | + |   | ▒ |   |    | LSft | LCtl  | LAlt | LGui |   |
|---+---+---+---+---+---+---+---+---+----+------+-------+------+------+---|
|   | ~ | ! | @ | # | ¦ |   | ▒ |   |    | Curr | Opp   | RAlt |      |   |
|---+---+---+---+---+---+---+---+---+----+------+-------+------+------+---|
| ▒ | ▒ | ▒ | . | 0 | - | ▒ | ▒ | ▒ | NA | NA   | NA    | ▒▒▒▒ | ▒▒▒▒ | ▒ |
|---+---+---+---+---+---+---+---+---+----+------+-------+------+------+---|

** Fun (Layer 9)

|---+-----+-----+------+-----+-------+---+---+---+----+------+-------+------+------+---|
|   | F12 | F7  | F8   | F9  | PrScn | ▒ | ▒ | ▒ |    | Base | Extra | Tap  | Boot |   |
|---+-----+-----+------+-----+-------+---+---+---+----+------+-------+------+------+---|
|   | F11 | F4  | F5   | F6  | ScrLk |   | ▒ |   |    | LSft | LCtl  | LAlt | LGui |   |
|---+-----+-----+------+-----+-------+---+---+---+----+------+-------+------+------+---|
|   | F10 | F1  | F2   | F3  | Pause |   | ▒ |   |    | Curr | Opp   | RAlt |      |   |
|---+-----+-----+------+-----+-------+---+---+---+----+------+-------+------+------+---|
| ▒ | ▒▒▒ | ▒▒▒ | RGui | Spc | Tab   | ▒ | ▒ | ▒ | NA | NA   | NA    | ▒▒▒▒ | ▒▒▒▒ | ▒ |
|---+-----+-----+------+-----+-------+---+---+---+----+------+-------+------+------+---|
